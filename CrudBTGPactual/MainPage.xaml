<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CrudBTGPactual.MainPage">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <Frame Grid.Row="0" BackgroundColor="#0066CC" Padding="20,10" Margin="0,0,0,10">
            <Label Text="Sistema de Cadastro de Clientes"
                   FontSize="24"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalOptions="Center" />
        </Frame>

        <!-- Client List -->
        <Grid Grid.Row="1" Margin="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Lista de Clientes -->
            <Frame Grid.Column="0" BackgroundColor="White" HasShadow="True" Padding="10">
                <CollectionView ItemsSource="{Binding Clients}"
                                SelectedItem="{Binding SelectedClient}"
                                SelectionMode="Single"
                                BackgroundColor="Transparent">
                    <CollectionView.Header>
                        <Label Text="Lista de Clientes"
                               FontSize="18"
                               FontAttributes="Bold"
                               Margin="0,0,0,10"
                               TextColor="#333" />
                    </CollectionView.Header>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="10,8">
                                <Frame BackgroundColor="#F8F9FA" 
                                       HasShadow="False" 
                                       Padding="15,10"
                                       CornerRadius="8">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>

                                        <Label Grid.Column="0" Grid.Row="0" 
                                               Text="{Binding FullName}"
                                               FontSize="16"
                                               FontAttributes="Bold"
                                               TextColor="#2C3E50" />

                                        <Label Grid.Column="1" Grid.Row="0" 
                                               Text="{Binding Age, StringFormat='Idade: {0}'}"
                                               FontSize="14"
                                               TextColor="#7F8C8D"
                                               HorizontalOptions="Center" />

                                        <Label Grid.Column="2" Grid.Row="0" 
                                               Text="{Binding Address}"
                                               FontSize="14"
                                               TextColor="#7F8C8D"
                                               HorizontalOptions="End" />
                                    </Grid>
                                </Frame>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                    <CollectionView.EmptyView>
                        <Label Text="Nenhum cliente cadastrado"
                               FontSize="16"
                               TextColor="#95A5A6"
                               HorizontalOptions="Center"
                               Margin="20" />
                    </CollectionView.EmptyView>
                </CollectionView>
            </Frame>

            <!-- Botões de Ação -->
            <StackLayout Grid.Column="1" Spacing="15" Margin="15,0,0,0">
                <Button Text="Adicionar Cliente"
                        Command="{Binding AddClientCommand}"
                        BackgroundColor="#27AE60"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        Padding="20,12"
                        WidthRequest="150" />

                <Button Text="Editar Cliente"
                        Command="{Binding EditClientCommand}"
                        BackgroundColor="#3498DB"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        Padding="20,12"
                        WidthRequest="150" />

                <Button Text="Excluir Cliente"
                        Command="{Binding DeleteClientCommand}"
                        BackgroundColor="#E74C3C"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        Padding="20,12"
                        WidthRequest="150" />

                <Button Text="Atualizar Lista"
                        Command="{Binding RefreshCommand}"
                        BackgroundColor="#95A5A6"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        Padding="20,12"
                        WidthRequest="150" />
            </StackLayout>
        </Grid>

        <!-- Status Bar -->
        <Frame Grid.Row="2" BackgroundColor="#ECF0F1" Padding="15,8" Margin="0,10,0,0">
            <Label Text="{Binding Clients.Count, StringFormat='Total de clientes: {0}'}"
                   FontSize="14"
                   TextColor="#2C3E50"
                   HorizontalOptions="Start" />
        </Frame>
    </Grid>

</ContentPage>
